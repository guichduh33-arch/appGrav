<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Breakery - Gestion des Stocks</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@500&family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/stock.css">
</head>

<body>
    <div class="dashboard-app">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar__header">
                <div class="sidebar__logo">
                    <span>ü•ê</span>
                    <span>The Breakery</span>
                </div>
            </div>

            <nav class="sidebar__nav">
                <div class="nav-section">
                    <h3 class="nav-section__title">CAISSE & CUISINE</h3>
                    <a href="index.html" class="nav-item">
                        <i data-lucide="monitor" width="20" height="20"></i>
                        <span>Point de Vente</span>
                    </a>
                    <a href="kds.html" class="nav-item">
                        <i data-lucide="coffee" width="20" height="20"></i>
                        <span>KDS (Cuisine)</span>
                    </a>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section__title">GESTION</h3>
                    <a href="#" class="nav-item is-active">
                        <i data-lucide="package" width="20" height="20"></i>
                        <span>Stocks</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="chef-hat" width="20" height="20"></i>
                        <span>Production</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="briefcase" width="20" height="20"></i>
                        <span>Clients B2B</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="truck" width="20" height="20"></i>
                        <span>Fournisseurs</span>
                    </a>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section__title">ADMINISTRATION</h3>
                    <a href="#" class="nav-item">
                        <i data-lucide="bar-chart-2" width="20" height="20"></i>
                        <span>Rapports</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i data-lucide="settings" width="20" height="20"></i>
                        <span>Param√®tres</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar__footer">
                <div class="user-profile">
                    <div class="avatar avatar-sm">A</div>
                    <div class="user-info">
                        <span class="user-name">Apni</span>
                        <span class="user-role">Manager</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="dashboard-main">
            <header class="dashboard-header">
                <h1 class="page-title">Gestion des Stocks</h1>
                <div class="dashboard-header-actions">
                    <button class="btn btn-secondary" onclick="window.location.reload()">
                        <i data-lucide="refresh-cw" width="18" height="18"></i>
                        Actualiser
                    </button>
                    <button class="btn btn-primary" id="adjustStockBtn">
                        <i data-lucide="sliders" width="18" height="18"></i>
                        Ajustement manuel
                    </button>
                </div>
            </header>

            <div class="dashboard-content">

                <!-- STATS WIDGETS -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-card__label">Total Produits</span>
                        <span class="stat-card__value" id="statsTotal">38</span>
                        <span class="stat-card__trend positive">
                            <i data-lucide="trending-up" width="12" height="12"></i>
                            +2 nouveaux
                        </span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label">Alertes Stock Bas</span>
                        <span class="stat-card__value stat-card__value--warning" id="statsLow">3</span>
                        <span class="stat-card__trend positive">
                            Stable
                        </span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label">Ruptures de Stock</span>
                        <span class="stat-card__value stat-card__value--urgent" id="statsOut">1</span>
                        <span class="stat-card__trend negative">
                            <i data-lucide="alert-circle" width="12" height="12"></i>
                            Action requise
                        </span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label">Valeur du Stock</span>
                        <span class="stat-card__value" id="statsValue">Rp 12.5M</span>
                        <span class="stat-card__trend">Est. co√ªt achat</span>
                    </div>
                </div>

                <!-- DATA TABLE -->
                <div class="data-table-container">
                    <div class="table-toolbar">
                        <div class="search-input search-input--wide">
                            <i data-lucide="search" class="search-input__icon"></i>
                            <input type="text" placeholder="Rechercher nom, SKU, cat√©gorie..." id="stockSearch">
                        </div>

                        <div class="table-actions">
                            <select class="form-select category-filter" id="categoryFilter" title="Filtre par cat√©gorie"
                                aria-label="Filtrer par cat√©gorie">
                                <option value="all">Toutes cat√©gories</option>
                                <option value="coffee">Caf√©</option>
                                <option value="ingredients">Ingr√©dients</option>
                                <option value="packaging">Emballage</option>
                                <option value="drinks">Boissons</option>
                            </select>
                            <button class="btn btn-secondary">
                                <i data-lucide="download" width="18" height="18"></i> Export
                            </button>
                        </div>
                    </div>

                    <div class="table-container-scroll">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th class="product-column">Produit</th>
                                    <th>Cat√©gorie</th>
                                    <th>En Stock</th>
                                    <th>Unit√©</th>
                                    <th>Statut</th>
                                    <th>Dernier Mvt.</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="stockTableBody">
                                <!-- Rows processed by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </main>

    </div>

    <!-- MODAL: ADJUST STOCK -->
    <div class="modal-backdrop" id="adjustModal">
        <div class="modal modal-md">
            <div class="modal__header">
                <h3 class="modal__title">Ajustement de Stock</h3>
                <button class="modal__close" id="closeAdjustModal" aria-label="Fermer" title="Fermer">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <div class="modal__body">
                <div class="form-group form-group--mb">
                    <label class="form-label">Produit</label>
                    <select class="form-select" id="adjustProduct" title="S√©lectionnez un produit"
                        aria-label="S√©lectionnez un produit">
                        <option value="">S√©lectionner un produit...</option>
                        <!-- Options populated by JS -->
                    </select>
                </div>

                <div class="form-group form-group--mb">
                    <label class="form-label">Type de mouvement</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="adjustType" id="typeIn" value="in" checked>
                            <label for="typeIn" class="radio-option__label radio-option__label--compact">
                                <span class="modifier-option__text modifier-option__text--success">+ Entr√©e</span>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="adjustType" id="typeOut" value="out">
                            <label for="typeOut" class="radio-option__label radio-option__label--compact">
                                <span class="modifier-option__text modifier-option__text--urgent">- Sortie</span>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="adjustType" id="typeSet" value="set">
                            <label for="typeSet" class="radio-option__label radio-option__label--compact">
                                <span class="modifier-option__text modifier-option__text--info">=
                                    Inventaire</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group form-group--mb">
                    <label class="form-label">Quantit√©</label>
                    <input type="number" class="form-input" id="adjustQty" placeholder="0">
                </div>

                <div class="form-group">
                    <label class="form-label">Raison</label>
                    <select class="form-select" id="adjustReason" title="Raison de l'ajustement"
                        aria-label="Raison de l'ajustement">
                        <option value="purchase">Achat fournisseur</option>
                        <option value="correction">Correction inventaire</option>
                        <option value="waste">Perte / G√¢chis</option>
                        <option value="gift">Don / Promo</option>
                        <option value="other">Autre</option>
                    </select>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn-secondary" id="cancelAdjustBtn">Annuler</button>
                <button class="btn btn-primary" id="saveAdjustBtn">Enregistrer</button>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="js/stock.js"></script>
</body>

</html>