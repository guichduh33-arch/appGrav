{
  "module": "purchasing",
  "description": "Gestion des achats et fournisseurs",
  "tables": {
    "suppliers": {
      "description": "Fournisseurs",
      "columns": {
        "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
        "code": "VARCHAR(20) UNIQUE",
        "name": "VARCHAR(255) NOT NULL",
        "contact_name": "VARCHAR(255)",
        "email": "VARCHAR(255)",
        "phone": "VARCHAR(50)",
        "address": "TEXT",
        "payment_terms": "VARCHAR(100)",
        "notes": "TEXT",
        "is_active": "BOOLEAN DEFAULT true",
        "created_at": "TIMESTAMPTZ DEFAULT NOW()"
      },
      "rls": true
    },
    "purchase_orders": {
      "description": "Commandes d'achat",
      "columns": {
        "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
        "order_number": "VARCHAR(50) UNIQUE NOT NULL",
        "supplier_id": "UUID REFERENCES suppliers(id) NOT NULL",
        "status": "VARCHAR(20) DEFAULT 'draft'",
        "order_date": "DATE NOT NULL",
        "expected_date": "DATE",
        "received_date": "DATE",
        "subtotal": "DECIMAL(15,2) NOT NULL DEFAULT 0",
        "tax_amount": "DECIMAL(15,2) DEFAULT 0",
        "total_amount": "DECIMAL(15,2) NOT NULL DEFAULT 0",
        "notes": "TEXT",
        "created_by": "UUID REFERENCES auth.users(id)",
        "created_at": "TIMESTAMPTZ DEFAULT NOW()"
      },
      "rls": true
    },
    "purchase_order_items": {
      "description": "Lignes de commande d'achat",
      "columns": {
        "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
        "purchase_order_id": "UUID REFERENCES purchase_orders(id) ON DELETE CASCADE",
        "product_id": "UUID REFERENCES products(id) NOT NULL",
        "quantity_ordered": "DECIMAL(15,3) NOT NULL",
        "quantity_received": "DECIMAL(15,3) DEFAULT 0",
        "unit_price": "DECIMAL(15,2) NOT NULL",
        "line_total": "DECIMAL(15,2) NOT NULL"
      },
      "rls": true
    }
  }
}